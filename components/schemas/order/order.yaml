type: object
description: 'Đơn hàng (Order)'
required:
  - id
  - user_id
  - total
  - grand_total
  - status
properties:
  id:
    type: integer
    readOnly: true
    description: 'Mã đơn hàng (khóa chính)'
    example: 1001
  subtotal:
    type: number
    format: float
    description: 'Tổng tiền hàng (chưa thuế, phí)'
    example: 12990000.00
  tax:
    type: number
    format: float
    description: 'Thuế'
    example: 1299000.00
  shipping:
    type: number
    format: float
    description: 'Phí vận chuyển'
    example: 30000.00
  total:
    type: number
    format: float
    description: 'Tổng cộng (subtotal + tax + shipping)'
    example: 14319000.00
  discount_total:
    type: number
    format: float
    description: 'Tổng giảm giá'
    example: 500000.00
  grand_total:
    type: number
    format: float
    description: 'Thành tiền cuối (sau giảm giá)'
    example: 13819000.00

  phone:
    type: string
    maxLength: 20
    description: 'Số điện thoại người nhận'
    example: '0987654321'

  line1:
    type: string
    maxLength: 255
    description: 'Địa chỉ 1'
    example: '123 Nguyễn Trãi'
  line2:
    type: string
    maxLength: 255
    description: 'Địa chỉ 2 (tuỳ chọn)'
    example: 'Phường 4, Quận 5'
  city:
    type: string
    maxLength: 255
    description: 'Thành phố'
    example: 'TP. Hồ Chí Minh'
  province:
    type: string
    maxLength: 255
    description: 'Tỉnh / Thành phố'
    example: 'Hồ Chí Minh'
  country:
    type: string
    maxLength: 255
    description: 'Quốc gia'
    example: 'Việt Nam'

  orders_at:
    type: string
    format: date-time
    description: 'Thời điểm đặt hàng'
    example: '2025-10-31T09:30:00Z'

  status:
    type: string
    enum: [1, 2, 3, 4, 5, 6, 7, 8]
    description: >
      Trạng thái đơn hàng:
      - `pending_payment`: Chờ thanh toán  
      - `paid`: Đã thanh toán  
      - `processing`: Đang xử lý  
      - `shipped`: Đã giao hàng cho đơn vị vận chuyển  
      - `delivered`: Đã giao thành công  
      - `refunded`: Đã hoàn tiền  
      - `returned`: Khách hàng trả hàng  
      - `cancelled`: Đã hủy
    example: 'processing'

  note:
    type: string
    maxLength: 255
    description: 'Ghi chú của khách hàng'
    example: 'Giao buổi sáng, gọi trước khi tới'

  items:
    type: array
    description: 'Danh sách sản phẩm trong đơn hàng'
    items:
      $ref: ./order_item.yaml
