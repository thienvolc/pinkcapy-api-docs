openapi: 3.1.0
info:
  title: PinkCapy API
  version: 1.0.0
  description: API documentation for PinkCapy Retail E-commerce System

servers:
  - url: https://pinkcapy.dev/v1
    description: Production server
  - url: http://localhost:8000/v1
    description: Local development

paths:
  # Catalog API : @catalog
  /products/{product_id}: { $ref: '@catalog#/paths/~1products~1{product_id}' }
  /products/{slug}: { $ref: '@catalog#/paths/~1products~1{slug}' }
  /products/{product_id}/related: { $ref: '@catalog#/paths/~1products~1{product_id}~1related' }
  /products: { $ref: '@catalog#/paths/~1products' }

  /admin/products/{product_id}: { $ref: '@catalog#/paths/~1admin~1products~1{product_id}' }
  /admin/products/{product_id}/metas: { $ref: '@catalog#/paths/~1admin~1products~1{product_id}~1metas' }
  /admin/products/{product_id}/metas/{meta_id}: { $ref: '@catalog#/paths/~1admin~1products~1{product_id}~1metas~1{meta_id}' }
  /admin/products/{product_id}/categories: { $ref: '@catalog#/paths/~1admin~1products~1{product_id}~1categories' }
  /admin/products/{product_id}/tags: { $ref: '@catalog#/paths/~1admin~1products~1{product_id}~1tags' }
  /admin/products/{product_id}/status: { $ref: '@catalog#/paths/~1admin~1products~1{product_id}~1status' }
  /admin/products: { $ref: '@catalog#/paths/~1admin~1products' }
  /admin/products/{product_id}/inventories: { $ref: '@catalog#/paths/~1admin~1products~1{product_id}~1inventories' }

  /tags/{tag_id}/products: { $ref: '@catalog#/paths/~1tags~1{tag_id}~1products' }
  /admin/tags: { $ref: '@catalog#/paths/~1admin~1tags' }
  /admin/tags/{tag_id}: { $ref: '@catalog#/paths/~1admin~1tags~1{tag_id}' }
  /categories: { $ref: '@catalog#/paths/~1categories' }
  /categories/{slug}: { $ref: '@catalog#/paths/~1categories~1{slug}' }
  /categories/{slug}/products: { $ref: '@catalog#/paths/~1categories~1{slug}~1products' }
  /admin/categories/{category_id}: { $ref: '@catalog#/paths/~1admin~1categories~1{category_id}' }
  /admin/categories: { $ref: '@catalog#/paths/~1admin~1categories' }

  # Sales Domain : @sales
  /me/carts: { $ref: '@sales#/paths/~1me~1carts' }
  /me/carts/items: { $ref: '@sales#/paths/~1me~1carts~1items' }
  /me/carts/items/{cart_item_id}: { $ref: '@sales#/paths/~1me~1carts~1items~1{cart_item_id}' }
  /me/carts/clear: { $ref: '@sales#/paths/~1me~1carts~1clear' }
  /me/carts/checkout: { $ref: '@sales#/paths/~1me~1carts~1checkout' }
  /me/orders: { $ref: '@sales#/paths/~1me~1orders' }
  /me/orders/{order_id}: { $ref: '@sales#/paths/~1me~1orders~1{order_id}' }
  /me/orders/{order_id}/status: { $ref: '@sales#/paths/~1me~1orders~1{order_id}~1status' }
  /me/orders/{order_id}/shipping: { $ref: '@sales#/paths/~1me~1orders~1{order_id}~1shipping' }
  /me/orders/{order_id}/cancel: { $ref: '@sales#/paths/~1me~1orders~1{order_id}~1cancel' }

  /admin/orders: { $ref: '@sales#/paths/~1admin~1orders' }
  /admin/orders/{order_id}: { $ref: '@sales#/paths/~1admin~1orders~1{order_id}' }
  /admin/orders/{order_id}/status: { $ref: '@sales#/paths/~1admin~1orders~1{order_id}~1status' }
  /admin/orders/{order_id}/cancel: { $ref: '@sales#/paths/~1admin~1orders~1{order_id}~1cancel' }

  /admin/transactions: { $ref: '@sales#/paths/~1admin~1transactions' }

  /me: { $ref: '@identity#/paths/~1me' }
  /users/auth/register: { $ref: '@identity#/paths/~1users~1auth~1register' }
  /users/auth/login: { $ref: '@identity#/paths/~1users~1auth~1login' }
  /users/auth/logout: { $ref: '@identity#/paths/~1users~1auth~1logout' }
  /users/auth/forgot-password: { $ref: '@identity#/paths/~1users~1auth~1forgot-password' }
  /users/auth/reset-password: { $ref: '@identity#/paths/~1users~1auth~1reset-password' }
  /me/password: { $ref: '@identity#/paths/~1me~1password' }

  /admin/users: { $ref: '@identity#/paths/~1admin~1users' }
  /admin/users/{user_id}: { $ref: '@identity#/paths/~1admin~1users~1{user_id}' }
  /admin/users/{user_id}/status: { $ref: '@identity#/paths/~1admin~1users~1{user_id}~1status' }
  /admin/users/{user_id}/roles: { $ref: '@identity#/paths/~1admin~1users~1{user_id}~1roles' }

  # Analytics Domain: @analytics
  /admin/dashboard/overview: { $ref: '@analytics#/paths/~1admin~1dashboard~1overview' }
  /admin/dashboard/revenue: { $ref: '@analytics#/paths/~1admin~1dashboard~1revenue' }
  /admin/dashboard/orders/stats: { $ref: '@analytics#/paths/~1admin~1dashboard~1orders~1stats' }
  /admin/dashboard/products/top: { $ref: '@analytics#/paths/~1admin~1dashboard~1products~1top' } 

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    InfiniteScroll: { $ref: './shared/schemas.yaml#/InfiniteScroll' }
    Pagination: { $ref: './shared/schemas.yaml#/Pagination' }
    ResponseBase: { $ref: './shared/schemas.yaml#/ResponseBase' }
    Meta: { $ref: './shared/schemas.yaml#/Meta' }
    AuditFields: { $ref: './shared/schemas.yaml#/AuditFields' }

  parameters:
    SortParam: { $ref: './shared/parameters.yaml#/SortParam' }
    AuthorizationHeader: { $ref: './shared/parameters.yaml#/AuthorizationHeader' }
    IdempotencyKeyHeader: { $ref: './shared/parameters.yaml#/IdempotencyKeyHeader' }
    PageParam: { $ref: './shared/parameters.yaml#/PageParam' }
    SizeParam: { $ref: './shared/parameters.yaml#/SizeParam' }
    OffsetParam: { $ref: './shared/parameters.yaml#/OffsetParam' }
    LimitParam: { $ref: './shared/parameters.yaml#/LimitParam' }

  responses:
    BadRequest: { $ref: './shared/error.yaml#/BadRequest' }
    Unauthorized: { $ref: './shared/error.yaml#/Unauthorized' }
    ValidationError: { $ref: './shared/error.yaml#/ValidationError' }
    Forbidden: { $ref: './shared/error.yaml#/Forbidden' }
    NotFound: { $ref: './shared/error.yaml#/NotFound' }
    Conflict: { $ref: './shared/error.yaml#/Conflict' }
    InternalServerError: { $ref: './shared/error.yaml#/InternalServerError' }
    NoContent: { $ref: './shared/error.yaml#/NoContent' }

    # Identity Domain
    # ResetPasswordTokenInvalid: { $ref: '@identity#/components/responses/ResetPasswordTokenInvalid' }
