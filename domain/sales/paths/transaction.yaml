meta: &meta
  $ref: '../../../openapi.yaml#/components/schemas/Meta'
auth_header: &auth_header
  $ref: '../../../openapi.yaml#/components/parameters/AuthorizationHeader'
pagination: &pagination
  $ref: '../../../openapi.yaml#/components/schemas/Pagination'
page_param: &page_param
  $ref: '../../../openapi.yaml#/components/parameters/PageParam'
size_param: &size_param
  $ref: '../../../openapi.yaml#/components/parameters/SizeParam'
sort_param: &sort_param
  $ref: '../../../openapi.yaml#/components/parameters/SortParam'

common_admin: &common_admin
  tags:
    - Transaction_Admin
  security:
    - bearerAuth: []

transaction: &transaction
  $ref: '../index.yaml#/components/schemas/Transaction'
# ============================================================

paths:
  /admin/transactions:
    get:
      summary: Search transactions for admin
      description: Retrieve a list of transactions based on search criteria.
      <<: *common_admin
      parameters:
        - *auth_header
        - *page_param
        - *size_param
        - *sort_param
        - name: user_id
          in: query
          description: Filter by user ID
          schema:
            type: integer
            example: 1
        - name: status
          in: query
          description: Filter by transaction status
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                properties:
                  meta: *meta
                  data:
                    allOf:
                      - *pagination
                      - type: object
                        properties:
                          data:
                            type: array
                            items: *transaction
