meta: &meta
  $ref: '../../../openapi.yaml#/components/schemas/Meta'
infinite_scroll: &infinite_scroll
  $ref: '../../../openapi.yaml#/components/schemas/InfiniteScroll'
offset_param: &offset_param
  $ref: '../../../openapi.yaml#/components/parameters/OffsetParam'
limit_param: &limit_param
  $ref: '../../../openapi.yaml#/components/parameters/LimitParam'
sort_param: &sort_param
  $ref: '../../../openapi.yaml#/components/parameters/SortParam'

tags: &tags
  - Tag_Public

tag_id: &tag_id
  name: tag_id
  in: path
  required: true
  description: ID of the tag
  schema:
    type: integer
    example: 1

product_public: &product_public
  $ref: '../index.yaml#/components/schemas/ProductPublic'
# ============================================================

paths:
  /tags/{tag_id}/products:
    get:
      summary: Get products by tag ID
      description: Retrieve a list of products associated with a specific tag.
      tags: *tags
      parameters: [*limit_param, *offset_param, *sort_param, *tag_id]
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  meta: *meta
                  data:
                    allOf:
                      - *infinite_scroll
                      - type: object
                        properties:
                          data:
                            type: array
                            items: *product_public
